@use '../../theme';
@use './core' as *;
@use '@material/ripple/mdc-ripple';

@include core-styles;

$spacer-margin: 8px !default;

$icon-font-size: 14px !default;
$icon-margin: 0 8px 0 0 !default;
$vertical-icon-margin: 0 16px 0 0 !default;
$icon-size: 24px !default;

$label-font-size: 14px !default;
$label-font-weight: 500 !default;

$clusetered-border-min-width: 25px !default;

$expansion-panel-margin-left: 60px !default;
$expansion-panel-margin-top: 4px !default;
$expansion-panel-margin-bottom: 4px !default;
$expansion-panel-border-left-width: 1px !default;

:host {
  @include tokens;
}

:host(:first-child[alternative]) {
  &::after {
    align-self: flex-start;
    top: 22px;
    margin: 0;
  }
}
:host(:last-child[alternative]) {
  &::before {
    align-self: flex-start;
    top: 22px;
    margin: 0;
  }
}

:host(:not(:first-child):not(:last-child)[alternative]) {
  &::before,
  &::after {
    align-self: flex-start;
    top: 22px;
    min-width: 7px;
    margin: 0;
  }
}

:host(:not(:last-child)[alternative]) {
  .after {
    align-self: flex-start;
    top: 22px;
    position: absolute;
    width: calc(50% - 18px);
    left: calc(50% + 18px);
    height: 0;
    right: 0;
    
    &::after {
      content: '';
      flex: 1;
      flex-basis: 0.000000001px;
      position: absolute;
      right: 0;
      left: 0;
      min-width: 0;
      width: 100%;

      @include line();
    }
  }
}

:host(:not(:first-child)[alternative]) {
  .before {
    align-self: flex-start;
    top: 22px;
    position: absolute;
    left: 0;
    width: calc(50% - 18px);
    height: 0;

    &::before {
      content: '';
      left: 0;
      min-width: 0;
      width: 100%;
      flex: 1;
      flex-basis: 0.000000001px;
      position: absolute;

      @include line();
    }
  }
}

:host(:not(:first-child):not(:last-child)):host(:not([vertical])) {
  &::before,
  &::after {
    @include step-line;
    
    margin: 0 -10px;
  }
}

:host(:last-child):host(:not([vertical])) {
  &::before {
    @include step-line;
    
    margin: 0 -10px 0 0;
  }
}

:host(:not(:last-child)):host(:not([vertical])) {
  &::after {
    @include step-line;
    
    margin: 0 0 0 -10px;
  }
}

:host(:focus) {
  outline: none;
}

:host([vertical]) {
  @include vertical-host;
  
  &::after {
    content: none;
  }

  &::before {
    content: none;
  }

  .forge-step {
    @include vertical-base;

    .text-container {
      white-space: normal;
    }
  }

  .icon-container {
    .forge-step-icon-content {
      margin: $vertical-icon-margin;
    }
  }
}

:host([vertical][expandable]) {
  .expansion-panel {
    display: block;
  }
}

:host([ignore-user-expansion]) {
  @include forge-ignore-user-expansion;
}

forge-expansion-panel {
  &::part(root) {
    @include expansion-panel-styles;
  }
}

@include border-psudo-styles('[clustered]') {
  min-width: $clusetered-border-min-width;
}

@include border-psudo-styles('[safari][alternative]') {
  top: 24px;
  margin: 0 -5px;
}
